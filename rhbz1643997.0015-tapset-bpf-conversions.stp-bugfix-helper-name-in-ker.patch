From 4e9775b55b5ddd7447c100894ab816a849c2c8cc Mon Sep 17 00:00:00 2001
From: Serhei Makarov <smakarov@redhat.com>
Date: Tue, 30 Oct 2018 17:13:28 -0400
Subject: [PATCH 15/32] tapset/bpf/conversions.stp bugfix :: helper name in
 kernel_string(addr, err_msg)

---
 tapset/bpf/conversions.stp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/tapset/bpf/conversions.stp b/tapset/bpf/conversions.stp
index 1140a6875..88d63b70a 100644
--- a/tapset/bpf/conversions.stp
+++ b/tapset/bpf/conversions.stp
@@ -34,10 +34,10 @@ function kernel_string:string (addr:long, err_msg:string)
 %{ /* bpf */ /* pure */
   /* buf = bpf_stk_alloc(BPF_MAXSTRINGLEN);
      buf[0] = 0x0; // guarantee NUL byte
-     rc = bpf_probe_read_str(buf, n, addr); */
+     rc = bpf_probe_read_str(buf, BPF_MAXSTRINGLEN, addr); */
   alloc, $buf, BPF_MAXSTRINGLEN;
   0x62, $buf, -, -, 0x0; /* stw [$buf+0], 0x0 -- guarantee NUL byte */
-  call, $rc, bpf_probe_read_str, $buf, BPF_MAXSTRINGLEN, $addr;
+  call, $rc, probe_read_str, $buf, BPF_MAXSTRINGLEN, $addr;
 
   /* if (rc < 0) return err_msg;
      return buf; */
-- 
2.14.5

